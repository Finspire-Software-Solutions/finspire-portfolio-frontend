<div class="our-works-page">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">Our Works</h1>
        <p class="hero-description">
          Showcasing our successful projects and innovative solutions
        </p>
      </div>
    </div>
  </section>

  <!-- Filter Section -->
  <section class="section filter-section">
    <div class="container">
      <div class="filter-buttons">
        <button 
          *ngFor="let category of categories" 
          class="filter-btn"
          [class.active]="selectedCategory === category"
          (click)="filterWorks(category)">
          {{category}}
        </button>
      </div>
    </div>
  </section>

  <!-- Works Grid -->
  <section class="section works-section">
    <div class="container">
      <div class="works-grid">
        <div class="work-card" *ngFor="let work of filteredWorks">
          <div class="work-image">
            <ng-container *ngIf="work.image; else workPlaceholder">
              <ng-container *ngIf="work.mediaType === 'video'; else workImage">
                <video class="work-video" [src]="work.image" controls preload="metadata"></video>
              </ng-container>
              <ng-template #workImage>
                <img class="work-img" [src]="work.image" alt="{{work.title}}" />
              </ng-template>
            </ng-container>
            <ng-template #workPlaceholder>
              <div class="work-placeholder">
                <i class="fas fa-image"></i>
              </div>
            </ng-template>
            <div class="work-overlay">
              <div class="work-category">{{work.category}}</div>
            </div>
          </div>
          <div class="work-content">
            <h3 class="work-title">{{work.title}}</h3>
            <p class="work-description">{{ work.description | slice:0:140 }}<span *ngIf="isLongDescription(work, 140)">...</span></p>
            <button class="link-button" (click)="openWork(work)">Read more</button>
            <div class="work-technologies">
              <span class="tech-tag" *ngFor="let tech of work.technologies">{{tech}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section section-dark cta-section">
    <div class="container">
      <div class="cta-content">
        <h2 class="cta-title">Have a Project in Mind?</h2>
        <p class="cta-description">
          Let's work together to bring your vision to life
        </p>
        <a routerLink="/contact-us" class="btn btn-primary">Start Your Project</a>
      </div>
    </div>
  </section>

  <!-- Work Modal -->
  <div class="modal-backdrop" *ngIf="showWorkModal" (click)="closeWorkModal()"></div>
  <div class="modal" *ngIf="showWorkModal">
    <div class="modal-content">
      <button class="modal-close" (click)="closeWorkModal()" aria-label="Close">
        <i class="fas fa-times"></i>
      </button>
      <ng-container *ngIf="activeWork as work">
        <div class="modal-cover">
          <ng-container *ngIf="work.mediaType === 'video'; else bigImage">
            <video class="work-video" [src]="work.image" controls preload="metadata" style="width:100%; height:auto; border-radius:12px;"></video>
          </ng-container>
          <ng-template #bigImage>
            <img [src]="work.image" [alt]="work.title" style="width:100%; height:420px; object-fit:contain; border-radius:12px;" />
          </ng-template>
        </div>
        <h2 class="modal-title">{{ work.title }}</h2>
        <div class="modal-meta">
          <span class="tag">#{{ work.category }}</span>
          <span class="dot">â€¢</span>
          <span class="tags-inline">
            <span class="tag" *ngFor="let t of work.technologies">#{{ t }}</span>
          </span>
        </div>
        <div class="modal-body">{{ work.description }}</div>
      </ng-container>
    </div>
  </div>
</div>
